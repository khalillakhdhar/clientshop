(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(require('@angular/core'),exports, require('@angular/core'), require('rxjs'), require('rxjs/operators'), require('@angular/fire'), require('firebase/functions')) :
    typeof define === 'function' && define.amd ? define(['@angular/core','exports', '@angular/core', 'rxjs', 'rxjs/operators', '@angular/fire', 'firebase/functions'], factory) :
    (factory(global.ng.core,(global.angularfire2 = global.angularfire2 || {}, global.angularfire2.functions = {}),global.ng.core,global.rxjs,global.rxjs.operators,global.angularfire2));
}(this, (function (ɵngcc0,exports,core,rxjs,operators,fire) { 'use strict';

    var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
        var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
        if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
        else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
        return c > 3 && r && Object.defineProperty(target, key, r), r;
    };
    var __metadata = (undefined && undefined.__metadata) || function (k, v) {
        if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
    };
    var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
        return function (target, key) { decorator(target, key, paramIndex); }
    };
    var FunctionsRegionToken = new core.InjectionToken('angularfire2.functions.region');
    var FUNCTIONS_REGION = FunctionsRegionToken;
    var FUNCTIONS_ORIGIN = new core.InjectionToken('angularfire2.functions.origin');
    var ORIGIN = FUNCTIONS_ORIGIN;
    var REGION = FunctionsRegionToken;
    var AngularFireFunctions = (function () {
        function AngularFireFunctions(options, nameOrConfig, platformId, zone, region, origin) {
            this.schedulers = new fire.ɵAngularFireSchedulers(zone);
            this.functions = zone.runOutsideAngular(function () {
                var app = fire._firebaseAppFactory(options, zone, nameOrConfig);
                return app.functions(region || undefined);
            });
            if (origin) {
                this.functions.useFunctionsEmulator(origin);
            }
        }
        AngularFireFunctions.prototype.httpsCallable = function (name) {
            var _this = this;
            var callable = this.functions.httpsCallable(name);
            return function (data) {
                var callable$ = rxjs.from(callable(data));
                return callable$.pipe(operators.observeOn(_this.schedulers.outsideAngular), operators.map(function (r) { return r.data; }));
            };
        };
        AngularFireFunctions = __decorate([ __param(0, core.Inject(fire.FIREBASE_OPTIONS)),
            __param(1, core.Optional()), __param(1, core.Inject(fire.FIREBASE_APP_NAME)),
            __param(2, core.Inject(core.PLATFORM_ID)),
            __param(4, core.Optional()), __param(4, core.Inject(REGION)),
            __param(5, core.Optional()), __param(5, core.Inject(ORIGIN)),
            __metadata("design:paramtypes", [Object, Object, Object,
                core.NgZone, Object, Object])
        ], AngularFireFunctions);
AngularFireFunctions.ɵfac = function AngularFireFunctions_Factory(t) { return new (t || AngularFireFunctions)(ɵngcc0.ɵɵinject(fire.FIREBASE_OPTIONS), ɵngcc0.ɵɵinject(fire.FIREBASE_APP_NAME, 8), ɵngcc0.ɵɵinject(core.PLATFORM_ID), ɵngcc0.ɵɵinject(ɵngcc0.NgZone), ɵngcc0.ɵɵinject(REGION, 8), ɵngcc0.ɵɵinject(ORIGIN, 8)); };
AngularFireFunctions.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: AngularFireFunctions, factory: function (t) { return AngularFireFunctions.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AngularFireFunctions, [{
        type: core.Injectable
    }], function () { return [{ type: Object, decorators: [{
                type: core.Inject,
                args: [fire.FIREBASE_OPTIONS]
            }] }, { type: Object, decorators: [{
                type: core.Optional
            }, {
                type: core.Inject,
                args: [fire.FIREBASE_APP_NAME]
            }] }, { type: Object, decorators: [{
                type: core.Inject,
                args: [core.PLATFORM_ID]
            }] }, { type: ɵngcc0.NgZone }, { type: Object, decorators: [{
                type: core.Optional
            }, {
                type: core.Inject,
                args: [REGION]
            }] }, { type: Object, decorators: [{
                type: core.Optional
            }, {
                type: core.Inject,
                args: [ORIGIN]
            }] }]; }, null); })();
        return AngularFireFunctions;
    }());

    var __decorate$1 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
        var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
        if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
        else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
        return c > 3 && r && Object.defineProperty(target, key, r), r;
    };
    var AngularFireFunctionsModule = (function () {
        function AngularFireFunctionsModule() {
        }
AngularFireFunctionsModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: AngularFireFunctionsModule });
AngularFireFunctionsModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function AngularFireFunctionsModule_Factory(t) { return new (t || AngularFireFunctionsModule)(); }, providers: [AngularFireFunctions] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AngularFireFunctionsModule, [{
        type: core.NgModule,
        args: [{
                providers: [AngularFireFunctions]
            }]
    }], function () { return []; }, null); })();
        return AngularFireFunctionsModule;
    }());

    exports.FunctionsRegionToken = FunctionsRegionToken;
    exports.FUNCTIONS_REGION = FUNCTIONS_REGION;
    exports.FUNCTIONS_ORIGIN = FUNCTIONS_ORIGIN;
    exports.ORIGIN = ORIGIN;
    exports.REGION = REGION;
    exports.AngularFireFunctions = AngularFireFunctions;
    exports.AngularFireFunctionsModule = AngularFireFunctionsModule;

    Object.defineProperty(exports, '__esModule', { value: true });

})));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZnVuY3Rpb25zLnVtZC5qcyIsInNvdXJjZXMiOlsiZnVuY3Rpb25zLnVtZC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtvR0FDMkU7eUVBQ2xCOzRCQUM1QzswQkFDTTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7MkNBc0N3QixBQUVoQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O2tDQU9zQjs7Ozs7Ozs7Ozs7O1NBWXhCOzs7Ozs7OztnREFLOEIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuICAgIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IGZhY3RvcnkoZXhwb3J0cywgcmVxdWlyZSgnQGFuZ3VsYXIvY29yZScpLCByZXF1aXJlKCdyeGpzJyksIHJlcXVpcmUoJ3J4anMvb3BlcmF0b3JzJyksIHJlcXVpcmUoJ0Bhbmd1bGFyL2ZpcmUnKSwgcmVxdWlyZSgnZmlyZWJhc2UvZnVuY3Rpb25zJykpIDpcbiAgICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoWydleHBvcnRzJywgJ0Bhbmd1bGFyL2NvcmUnLCAncnhqcycsICdyeGpzL29wZXJhdG9ycycsICdAYW5ndWxhci9maXJlJywgJ2ZpcmViYXNlL2Z1bmN0aW9ucyddLCBmYWN0b3J5KSA6XG4gICAgKGZhY3RvcnkoKGdsb2JhbC5hbmd1bGFyZmlyZTIgPSBnbG9iYWwuYW5ndWxhcmZpcmUyIHx8IHt9LCBnbG9iYWwuYW5ndWxhcmZpcmUyLmZ1bmN0aW9ucyA9IHt9KSxnbG9iYWwubmcuY29yZSxnbG9iYWwucnhqcyxnbG9iYWwucnhqcy5vcGVyYXRvcnMsZ2xvYmFsLmFuZ3VsYXJmaXJlMikpO1xufSh0aGlzLCAoZnVuY3Rpb24gKGV4cG9ydHMsY29yZSxyeGpzLG9wZXJhdG9ycyxmaXJlKSB7ICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBfX2RlY29yYXRlID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG4gICAgfTtcbiAgICB2YXIgX19tZXRhZGF0YSA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fbWV0YWRhdGEpIHx8IGZ1bmN0aW9uIChrLCB2KSB7XG4gICAgICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShrLCB2KTtcbiAgICB9O1xuICAgIHZhciBfX3BhcmFtID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19wYXJhbSkgfHwgZnVuY3Rpb24gKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cbiAgICB9O1xuICAgIHZhciBGdW5jdGlvbnNSZWdpb25Ub2tlbiA9IG5ldyBjb3JlLkluamVjdGlvblRva2VuKCdhbmd1bGFyZmlyZTIuZnVuY3Rpb25zLnJlZ2lvbicpO1xuICAgIHZhciBGVU5DVElPTlNfUkVHSU9OID0gRnVuY3Rpb25zUmVnaW9uVG9rZW47XG4gICAgdmFyIEZVTkNUSU9OU19PUklHSU4gPSBuZXcgY29yZS5JbmplY3Rpb25Ub2tlbignYW5ndWxhcmZpcmUyLmZ1bmN0aW9ucy5vcmlnaW4nKTtcbiAgICB2YXIgT1JJR0lOID0gRlVOQ1RJT05TX09SSUdJTjtcbiAgICB2YXIgUkVHSU9OID0gRnVuY3Rpb25zUmVnaW9uVG9rZW47XG4gICAgdmFyIEFuZ3VsYXJGaXJlRnVuY3Rpb25zID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQW5ndWxhckZpcmVGdW5jdGlvbnMob3B0aW9ucywgbmFtZU9yQ29uZmlnLCBwbGF0Zm9ybUlkLCB6b25lLCByZWdpb24sIG9yaWdpbikge1xuICAgICAgICAgICAgdGhpcy5zY2hlZHVsZXJzID0gbmV3IGZpcmUuybVBbmd1bGFyRmlyZVNjaGVkdWxlcnMoem9uZSk7XG4gICAgICAgICAgICB0aGlzLmZ1bmN0aW9ucyA9IHpvbmUucnVuT3V0c2lkZUFuZ3VsYXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBhcHAgPSBmaXJlLl9maXJlYmFzZUFwcEZhY3Rvcnkob3B0aW9ucywgem9uZSwgbmFtZU9yQ29uZmlnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXBwLmZ1bmN0aW9ucyhyZWdpb24gfHwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKG9yaWdpbikge1xuICAgICAgICAgICAgICAgIHRoaXMuZnVuY3Rpb25zLnVzZUZ1bmN0aW9uc0VtdWxhdG9yKG9yaWdpbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgQW5ndWxhckZpcmVGdW5jdGlvbnMucHJvdG90eXBlLmh0dHBzQ2FsbGFibGUgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBjYWxsYWJsZSA9IHRoaXMuZnVuY3Rpb25zLmh0dHBzQ2FsbGFibGUobmFtZSk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2FsbGFibGUkID0gcnhqcy5mcm9tKGNhbGxhYmxlKGRhdGEpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGFibGUkLnBpcGUob3BlcmF0b3JzLm9ic2VydmVPbihfdGhpcy5zY2hlZHVsZXJzLm91dHNpZGVBbmd1bGFyKSwgb3BlcmF0b3JzLm1hcChmdW5jdGlvbiAocikgeyByZXR1cm4gci5kYXRhOyB9KSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICBBbmd1bGFyRmlyZUZ1bmN0aW9ucyA9IF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgY29yZS5JbmplY3RhYmxlKCksXG4gICAgICAgICAgICBfX3BhcmFtKDAsIGNvcmUuSW5qZWN0KGZpcmUuRklSRUJBU0VfT1BUSU9OUykpLFxuICAgICAgICAgICAgX19wYXJhbSgxLCBjb3JlLk9wdGlvbmFsKCkpLCBfX3BhcmFtKDEsIGNvcmUuSW5qZWN0KGZpcmUuRklSRUJBU0VfQVBQX05BTUUpKSxcbiAgICAgICAgICAgIF9fcGFyYW0oMiwgY29yZS5JbmplY3QoY29yZS5QTEFURk9STV9JRCkpLFxuICAgICAgICAgICAgX19wYXJhbSg0LCBjb3JlLk9wdGlvbmFsKCkpLCBfX3BhcmFtKDQsIGNvcmUuSW5qZWN0KFJFR0lPTikpLFxuICAgICAgICAgICAgX19wYXJhbSg1LCBjb3JlLk9wdGlvbmFsKCkpLCBfX3BhcmFtKDUsIGNvcmUuSW5qZWN0KE9SSUdJTikpLFxuICAgICAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3QsIE9iamVjdCwgT2JqZWN0LFxuICAgICAgICAgICAgICAgIGNvcmUuTmdab25lLCBPYmplY3QsIE9iamVjdF0pXG4gICAgICAgIF0sIEFuZ3VsYXJGaXJlRnVuY3Rpb25zKTtcbiAgICAgICAgcmV0dXJuIEFuZ3VsYXJGaXJlRnVuY3Rpb25zO1xuICAgIH0oKSk7XG5cbiAgICB2YXIgX19kZWNvcmF0ZSQxID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG4gICAgfTtcbiAgICB2YXIgQW5ndWxhckZpcmVGdW5jdGlvbnNNb2R1bGUgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBBbmd1bGFyRmlyZUZ1bmN0aW9uc01vZHVsZSgpIHtcbiAgICAgICAgfVxuICAgICAgICBBbmd1bGFyRmlyZUZ1bmN0aW9uc01vZHVsZSA9IF9fZGVjb3JhdGUkMShbXG4gICAgICAgICAgICBjb3JlLk5nTW9kdWxlKHtcbiAgICAgICAgICAgICAgICBwcm92aWRlcnM6IFtBbmd1bGFyRmlyZUZ1bmN0aW9uc11cbiAgICAgICAgICAgIH0pXG4gICAgICAgIF0sIEFuZ3VsYXJGaXJlRnVuY3Rpb25zTW9kdWxlKTtcbiAgICAgICAgcmV0dXJuIEFuZ3VsYXJGaXJlRnVuY3Rpb25zTW9kdWxlO1xuICAgIH0oKSk7XG5cbiAgICBleHBvcnRzLkZ1bmN0aW9uc1JlZ2lvblRva2VuID0gRnVuY3Rpb25zUmVnaW9uVG9rZW47XG4gICAgZXhwb3J0cy5GVU5DVElPTlNfUkVHSU9OID0gRlVOQ1RJT05TX1JFR0lPTjtcbiAgICBleHBvcnRzLkZVTkNUSU9OU19PUklHSU4gPSBGVU5DVElPTlNfT1JJR0lOO1xuICAgIGV4cG9ydHMuT1JJR0lOID0gT1JJR0lOO1xuICAgIGV4cG9ydHMuUkVHSU9OID0gUkVHSU9OO1xuICAgIGV4cG9ydHMuQW5ndWxhckZpcmVGdW5jdGlvbnMgPSBBbmd1bGFyRmlyZUZ1bmN0aW9ucztcbiAgICBleHBvcnRzLkFuZ3VsYXJGaXJlRnVuY3Rpb25zTW9kdWxlID0gQW5ndWxhckZpcmVGdW5jdGlvbnNNb2R1bGU7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuXG59KSkpO1xuIl19